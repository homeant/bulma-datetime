!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define("bulmaDatetime",["moment"],t):"object"==typeof exports?exports.bulmaDatetime=t(require("moment")):e.bulmaDatetime=t(e.moment)}(window,function(n){return function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=n},function(e,t,n){e.exports=n(4)},function(e,t,n){},,function(e,t,n){"use strict";function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var a=Object.getPrototypeOf,o={},i=o.toString,r=o.hasOwnProperty,c=r.toString,l=c.call(Object);function f(e){return"function"==typeof e&&"number"!=typeof e.nodeType}function m(e){var t,n;return!(!e||"[object Object]"!==i.call(e))&&(!(t=a(e))||"function"==typeof(n=r.call(t,"constructor")&&t.constructor)&&c.call(n)===l)}function s(e,t){var n,a=0;if(function(e){var t=!!e&&"length"in e&&e.length,n=(a=e,null!=a?"object"===u(a)||"function"==typeof a?o[i.call(a)]||"object":u(a):a+"");var a;if(f(e)||(r=e,null!=r&&r===r.window))return!1;var r;return"array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e}(e))for(n=e.length;a<n&&!1!==t.call(e[a],a,e[a]);a++);else for(a in e)if(!1===t.call(e[a],a,e[a]))break;return e}s("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){o["[object "+t+"]"]=t.toLowerCase()});var d=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild},y=n(0),h=n.n(y);n(2);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}h.a.locale("zh-cn");var p={renderInline:!1,format:h.a.localeData().longDateFormat("L"),type:"date",vaulue:null,min:"1900-1-1",max:"2099-12-31",trigger:"focus",lang:"cn",change:null},b="object"===("undefined"==typeof window?"undefined":v(window)),g=function(e){return/input|textarea/.test(e.tagName.toLocaleLowerCase())},S=0;function D(e,t){this.config={},function e(){var t,n,a,r,o,i,c=arguments[0]||{},l=1,s=arguments.length,d=!1;for("boolean"==typeof c&&(d=c,c=arguments[l]||{},l++),"object"===u(c)||f(c)||(c={}),l===s&&(c=this,l--);l<s;l++)if(null!=(t=arguments[l]))for(n in t)a=c[n],c!==(r=t[n])&&(d&&r&&(m(r)||(o=Array.isArray(r)))?(i=o?(o=!1,a&&Array.isArray(a)?a:[]):a&&m(a)?a:{},c[n]=e(d,i,r)):void 0!==r&&(c[n]=r));return c}(this.config,p,t),this.element="string"==typeof e?document.querySelector(e):e,this.init()}D.prototype={get minDate(){return this._minDate},set minDate(e){this._minDate=e?h()(e,this.config.format):null},get maxDate(){return this._maxDate},set maxDate(e){this._maxDate=e?h()(e,this.config.format):null},init:function(){var e=this,t=this;Object.defineProperty(t,"$data",{get:function(){return this._date||h()()},set:function(e){h()(e,this.config.format).isValid()&&(this._date=h()(e,this.config.format))}}),++S,Object.defineProperty(t,"uid",{value:S,enumerable:!0,writable:!1}),t.elemId="datepicker_".concat(t.uid),Object.defineProperty(t,"year",{get:function(){return this.$data.year()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"month",{get:function(){return this.$data.month()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"date",{get:function(){return this.$data.date()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"hour",{get:function(){return this.$data.hour()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"minute",{get:function(){return this.$data.minute()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"second",{get:function(){return this.$data.second()},enumerable:!0,configurable:!0});var n=function(){t.element.value?"date"===t.config.type?t.$data=h()(t.element.value,"YYYY-MM-DD"):"datetime"===t.config.type?t.$data=h()(t.element.value,"YYYY-MM-DD HH:mm:ss"):t.$data=h()(t.element.value):t.$data=h()(),e.minDate=e.config.minDate?h()(e.config.minDate):null,e.maxDate=e.config.maxDate?h()(e.config.maxDate):null};g(t.element)?t.trigger="focus":t.trigger="click",t.element.addEventListener(t.trigger,function(e){n(),t.render(),t.show(),t._adjustPosition()},!1),g(t.element)&&(t.element.addEventListener("keyup",function(e){h()(e.target.value,t.config.format).isValid()&&n(),t._refreshCalendar(),"datetime"===t.config.type&&t.timeScroll()},!1),t.element.addEventListener("change",function(e){h()(e.target.value,t.config.format).isValid()&&n(),t._refreshCalendar(),"datetime"===t.config.type&&t.timeScroll()},!1)),document.addEventListener("click",function(e){e.target!==t.element&&t.destroy()},!1)},render:function(){if(b){var e=this;if(!document.getElementById(e.elemId)){var t,n=e.config,a=(t={month:h.a.monthsShort()[e.month],year:e.$data.localeData().relativeTime(e.year,null,"yy",null).replace(" ","")},'\n<div class="datepicker">\n    <div class="calendar">\n        <div class="calendar-nav">\n            <div class="calendar-nav-prev">\n                <a class="button is-small calendar-nav-prev-year"><<</a>\n                <a class="button is-small calendar-nav-prev-month"><</a>\n            </div>\n            <div class="calendar-nav-control">\n                <span class="calendar-nav-year">'.concat(t.year,'</span>\n                <span class="calendar-nav-month">').concat(t.month,'</span>\n            </div>\n            <div class="calendar-nav-next">\n                <a class="button is-small calendar-nav-next-month">></a>\n                <a class="button is-small calendar-nav-next-year">>></a>\n            </div>\n        </div>\n        <div class="calendar-container">\n            <div class="calendar-header">\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[0],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[1],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[2],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[3],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[4],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[5],'</div>\n                <div class="calendar-date">').concat(h.a.weekdaysShort()[6],'</div>\n            </div>\n            <div class="calendar-body">\n                \n            </div>\n        </div>\n        <div class="calendar-confirm">\n            <a class="button is-small calendar-btn-clear">清空</a>\n            <a class="button is-small calendar-btn-confirm">确定</a>\n        </div>\n    </div>\n</div>\n')),r=e.container=d(a);if(r.setAttribute("id",e.elemId),document.getElementById(e.elemId)&&document.getElementById(e.elemId).remove(),n.renderInline?document.querySelector(e.config.trigger).appendChild(r):document.body.appendChild(r),"datetime"===n.type){var o=[d('<span class="calendar-btn-time">选择时间</span>'),d('<span class="calendar-btn-date">返回日期</span>')],i=r.querySelector(".calendar-confirm");i.insertBefore(o[0],i.firstChild),i.insertBefore(o[1],i.firstChild),e._initCalendarTime()}e._refreshCalendar(),e.events()}}},show:function(){this.container.style.display="block"},hide:function(e){e&&e.preventDefault(),this.container.style.display="none"},_adjustPosition:function(){var e,t,n,a=this.element;if("function"==typeof a.getBoundingClientRect)e=(n=a.getBoundingClientRect()).left+window.pageXOffset,t=n.bottom+window.pageYOffset;else for(e=a.offsetLeft,t=a.offsetTop+a.offsetHeight;a=a.offsetParent;)e+=a.offsetLeft,t+=a.offsetTop;this.container.style.position="absolute",this.container.style.left=e+"px",this.container.style.top=t+"px"},_refreshCalendar:function(){this.container.querySelector(".calendar-nav-year").innerHTML=this.$data.localeData().relativeTime(this.year,null,"yy",null).replace(" ",""),this.container.querySelector(".calendar-nav-month").innerHTML=h.a.monthsShort()[this.month],this.container.querySelector(".calendar-body").innerHTML="",this._renderDays()},_renderDays:function(){var e=h()().hours(0).minutes(0).seconds(0).milliseconds(0),t="",n=this.$data.daysInMonth(),a=h()().year(this.year).month(this.month).date(1).day(),r=h()().startOf("week").day();0<r&&(a-=r)<0&&(a+=7);for(var o=n+a,i=o;7<i;)i-=7;o+=7-i;for(var c=0;c<o;c++){var l=h()().year(this.year).month(this.month).date(c-a).hours(0).minutes(0).seconds(0).milliseconds(0),s=h()().year(this.year).month(this.month).date(this.date).hours(0).minutes(0).seconds(0).milliseconds(0),d=0==l.diff(s),u=0==l.diff(e),f=c<a||n+a<=c,m=!1;(l.month()!==this.month||this.minDate&&l.unix()<this.minDate.unix()||this.maxDate&&l.unix()>this.maxDate.unix())&&(m=!0),m&&(d=!1),t+=this._renderDay(l.date(),l.month(),l.year(),d,u,m,f,!1,!1,!1)}this.container.querySelector(".calendar-body").insertAdjacentHTML("beforeend",t),this._bindDaysEvents()},_renderDay:function(e,t,n,a,r,o,i,c,l,s){var d=h()({year:n,month:t,day:e}).format("YYYY-MM-DD").toString();return'\n        <div data-date="'.concat("".concat(d),'" class="calendar-date',o?" is-disabled":"").concat(c?" calendar-range":"").concat(l?" calendar-range-start":"").concat(s?" calendar-range-end":"",'">\n            <button class="date-item').concat(r?" is-today":"").concat(a?" is-active":"",'">').concat(e,"</button>\n        </div>\n        ")},events:function(){var r=this;this.container.querySelector(".calendar-nav-prev-month").addEventListener("click",function(e){return r.prevMonth(e)},!1),this.container.querySelector(".calendar-nav-next-month").addEventListener("click",function(e){return r.nextMonth(e)},!1),this.container.querySelector(".calendar-nav-prev-year").addEventListener("click",function(e){return r.prevYear(e)},!1),this.container.querySelector(".calendar-nav-next-year").addEventListener("click",function(e){return r.nextYear(e)},!1),this.container.querySelector(".calendar-btn-confirm").addEventListener("click",function(e){g(r.element)&&(r.element.value=r.format(),"function"==typeof r.config.change&&r.config.change.call(r,r.format())),r.destroy()},!1),this.container.querySelector(".calendar-btn-clear").addEventListener("click",function(e){r.element.value&&(r.element.value="")},!1),"datetime"==r.config.type&&(this.container.querySelector(".calendar-btn-time").addEventListener("click",function(e){r.container.querySelector(".calendar").classList.add("calendar-time"),r.timeScroll()},!1),this.container.querySelector(".calendar-btn-date").addEventListener("click",function(e){r.container.querySelector(".calendar")&&r.container.querySelector(".calendar").classList.remove("calendar-time")},!1),this.container.querySelector(".calendar-time-body").querySelectorAll("ol").forEach(function(a){a.querySelectorAll("li").forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget,n=t.dataset;n.hour?r.$data.hours(Number.parseInt(n.hour)):n.minute?r.$data.minutes(Number.parseInt(n.minute)):n.second&&r.$data.seconds(Number.parseInt(n.second)),a.querySelector(".is-active")&&a.querySelector(".is-active").classList.remove("is-active"),t.classList.add("is-active"),r.timeScroll()})})})),this.container.addEventListener("click",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.event;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},!1)},_initCalendarTime:function(){var e=d('<span class="calendar-time-text">选择时间</span>');this.container.querySelector(".calendar-nav-control").appendChild(e);var r=d('<ul class="calendar-time-body"></ul>');this.container.querySelector(".calendar-container").appendChild(r);var o=["时","分","秒"],i=["hour","minute","second"],c=[this.hour,this.minute,this.second];s([24,60,60],function(n,e){var t=d("<li></li>"),a=["<p>".concat(o[n],"</p><ol>")];s(new Array(e),function(e,t){a.push("<li data-".concat(i[n],'="').concat(e,'" class="').concat(e==c[n]?"is-active":"",'">').concat(function(e,t,n){var a="";t=t||2;for(var r=(e=String(e)).length;r<t;r++)a+="0";return e<Math.pow(10,t)?a+(0|e):e}(e),"</li>"))}),t.innerHTML=a.join("")+"</ol>",r.appendChild(t)})},_bindDaysEvents:function(){var n=this,a=this.container.querySelector(".calendar-body").querySelectorAll(".calendar-date"),r=n.config;a.forEach(function(e){e.addEventListener("click",function(e){if(e.preventDefault(),!e.currentTarget.classList.contains("is-disabled")){var t=h()(e.currentTarget.dataset.date,r.format);n.$data.date(t.date()),a.forEach(function(e){e.querySelectorAll(".date-item").forEach(function(e){return e.classList.remove("is-active")})}),e.currentTarget.querySelector(".date-item").classList.add("is-active")}},!1)})},timeScroll:function(){var e=this,t=e.hour,n=e.minute,a=e.second,r=e.container.querySelector(".calendar-time-body").querySelectorAll("ol")[0].firstChild.clientHeight;e.container.querySelector(".calendar-time-body").querySelectorAll("ol")[0].scrollTop=r*(t-2),e.container.querySelector(".calendar-time-body").querySelectorAll("ol")[1].scrollTop=r*(n-2),e.container.querySelector(".calendar-time-body").querySelectorAll("ol")[2].scrollTop=r*(a-2)},format:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.config.format;return this.$data.format(e)},prevMonth:function(e){e.preventDefault(),this.$data.subtract(1,"months"),this._refreshCalendar()},nextMonth:function(e){e.preventDefault(),this.$data.add(1,"months"),this._refreshCalendar()},prevYear:function(e){e.preventDefault(),this.$data.subtract(1,"y"),this._refreshCalendar()},nextYear:function(e){e.preventDefault(),this.$data.add(1,"y"),this._refreshCalendar()},destroy:function(){this.container&&this.container.remove()}};t.default=D}])});